
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Metodos de Visibilidade: Public, Protected, Private - #Ruby 1.9 - Rodrigo Martins</title>
  <meta name="author" content="Rodrigo Martins">

  
  <meta name="description" content="Hoje vamos continuar falando de Ruby, é hora de continuar nos aprofundando um pouco mais de
Metodos de Visibilidade: Public, Protected, Private... &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://rrmartins.com/blog/2012/09/09/metodos-de-visibilidade-public">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Rodrigo Martins" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href='//fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
<link href='//fonts.googleapis.com/css?family=Fjalla+One' rel='stylesheet' type='text/css'>

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-32145575-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   class="collapse-sidebar sidebar-footer" >
  <header role="banner">
	<div class="header-title"><a href="/">Rodrigo Martins</a></div>


	<br><div class="header-subtitle">I'm a software developer. Passionate about life, codes, questions, theories and theorems. :)</div>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss email">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
    <li><a href="mailto:rodrigo@rrmartins.com" rel="subscribe-email" title="subscribe via email rrmartins.com">Email</a></li>
  
</ul>
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="http://twitter.com/rr_martins">Twitter</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
  
    
      <h1 class="entry-title">Metodos De Visibilidade: Public, Protected, Private - #Ruby 1.9</h1>
    
  
    
      <p class="meta">
        








  


<time datetime="2012-09-09T19:31:00-03:00" pubdate data-updated="true"></time>
        
         | <a href="#disqus_thread">Comments</a>
        
      </p>
    
  </header>


<div class="entry-content"><!--more-->


<p>Hoje vamos continuar falando de <a href="http://www.ruby-doc.org/core-1.9.2/">Ruby</a>, é hora de continuar nos aprofundando um pouco mais de
<b>Metodos de Visibilidade: Public, Protected, Private</b>...</p>




<h1>Metodos de Visibilidade: Public, Protected, Private</h1>


<p>Métodos de instância podem ser <code>public</code>, <code>private</code> ou <code>protected</code>. Se você já programou com outras linguagens orientadas a objeto, você já pode estar
familiarizado com esses termos. Preste atenção de qualquer maneira, porque estas palavras têm um significado um pouco diferente em Ruby do que em
outras Linguagens.</p>

<p>Métodos são normalmente <code>public</code> a menos que explicitamente declarado ser <code>private</code> ou <code>protected</code>. Uma exceção é o método <code>initialize</code>, que é sempre
implicitamente privada. Outra exceção é qualquer método &ldquo;global&rdquo; declarado fora de uma definição de classe desses métodos são definidos como métodos
privados de instância de objeto. Um método <code>public</code> pode ser chamado em qualquer lugar, não há restrições sobre seu uso.</p>

<p>Um método <code>private</code> é uma implementação interna de uma classe, e que só pode ser chamada por métodos de outra instância da classe (ou, como veremos
mais tarde, as suas subclasses). Métodos <code>private</code> são implicitamente invocado em si mesmo, e não podem ser explicitamente chamado em um objeto. Se <code>m</code>
é um método <code>private</code>, então você deve chamá-lo em estilo funcional como <code>m</code>. Você não pode escrever <code>o.m</code> ou mesmo <code>self.m</code>.</p>

<p>Um método <code>protected</code> é como um método <code>private</code> em que só pode ser chamado de dentro da implementação de uma classe ou suas subclasses. Ela difere de
um método <code>private</code> na medida em que pode ser explicitamente chamado em qualquer instância da classe, e ele não se restringe a invocação implícita em
si mesmo. Um método <code>protected</code> pode ser usado, por exemplo, para definir um acessor que permite que instâncias de uma classe podem compartilhar o
estado interno com o outro, mas não permite que os utilizadores de classe possam acessar esse estado.</p>

<p>Métodos <code>protected</code> são os menos comumente definido e também o mais difícil de entender. A regra sobre quando um método <code>protected</code> pode ser invocado
pode ser mais formalmente descritos como segue: um método <code>protected</code> definido por uma classe C pode ser invocado em um <code>objeto o</code> através de um método
em um <code>objeto p</code> se e somente se as classes de <code>o</code> e <code>p</code> são ambos subclasses ou iguais para, a classe C.</p>

<p>Métodos de visibilidade é declarado com três métodos chamados <code>public</code>, <code>private</code> e <code>protected</code>. Estes são os métodos de instância da Classe do módulo.
Todas as classes são módulos, e dentro de uma definição de classe, a classe auto-refere-se ao que está sendo definido. Assim, <code>public</code>, <code>private</code> e
<code>protected</code> pode ser usado como se fossem palavras-chave da linguagem. Em fato, no entanto, são chamadas de método em si. Há duas maneiras para chamar
esses métodos. Sem argumentos, eles especificam que todas as definições de método subsequentes terão a visibilidade especificada. Uma classe pode
usá-los como este:</p>

<figure class='code'><figcaption><span>Visibilidade de Metodos</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">Point</span>
</span><span class='line'><span class="err">  </span><span class="c1"># Métodos públicos aqui</span>
</span><span class='line'>
</span><span class='line'><span class="err">  </span><span class="c1"># Os seguintes métodos são protegidos</span>
</span><span class='line'><span class="err">  </span><span class="kp">protected</span>
</span><span class='line'>
</span><span class='line'><span class="err">  </span><span class="c1"># Métodos protegidos aqui</span>
</span><span class='line'>
</span><span class='line'><span class="err">  </span><span class="c1"># Os seguintes métodos são privados</span>
</span><span class='line'><span class="err">  </span><span class="kp">private</span>
</span><span class='line'>
</span><span class='line'><span class="err">  </span><span class="c1"># Métodos privadas aqui</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Os métodos também podem ser invocados com os nomes de um ou mais métodos (como <code>symbols</code> ou <code>strings</code>) como argumentos. Quando chamado assim, eles
alteram a visibilidade dos métodos chamados. Neste uso, a declaração de visibilidade deve vir após a definição do método. Uma abordagem consiste em
declarar todos os métodos <code>private</code> e <code>protected</code> de uma só vez, no final de uma classe. Outra abordagem é declarar a visibilidade de cada método
<code>private</code> ou <code>protected</code> imediatamente após sua definição. Aqui, por exemplo, é uma classe com um método de utilidade <code>private</code> e um método de acesso
<code>protected</code>:</p>

<figure class='code'><figcaption><span>Visibilidade de Metodos</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">Widget</span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">x</span>                       <span class="c1"># método de acesso para @x</span>
</span><span class='line'>    <span class="vi">@x</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>  <span class="kp">protected</span> <span class="ss">:x</span>                <span class="c1"># Faça-o protegido</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">utility_method</span>          <span class="c1"># Define um método</span>
</span><span class='line'>    <span class="kp">nil</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>  <span class="kp">private</span> <span class="ss">:utility_method</span>     <span class="c1"># E torná-lo privado</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Lembre-se que <code>public</code>, <code>private</code> e <code>protected</code> aplicam-se apenas aos métodos em Ruby. Variáveis de instância e de classe são encapsuladas e
efetivamente <code>private</code>, e constantes são efetivamente <code>public</code>. Não há nenhuma maneira de fazer uma variável de instância acessível a partir de fora de
uma classe (exceto pela definição de um método de acesso, é claro). E não há maneira de definir uma constante que é inacessível para uso externo.</p>

<p>Ocasionalmente, é útil para especificar que um método de classe deve ser privado. Se sua classe define métodos de fábrica, por exemplo, você pode
querer fazer o novo método <code>private</code>. Para fazer isso, use o método <code>private_class_method</code>, especificando um ou mais nomes de métodos como símbolos:</p>

<figure class='code'><figcaption><span>private_class_method</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="nb">private_class_method</span> <span class="ss">:new</span>
</span></code></pre></td></tr></table></div></figure>


<p>Você pode tornar público um método <code>private</code> de classe novamente com <code>public_class_method</code>. Nenhum método pode ser chamado sem argumentos na forma que
o <code>public</code>, <code>protected</code> e <code>private</code> pode ser.</p>

<p>Ruby é, por definição, uma linguagem muito aberta. A capacidade de especificar que alguns métodos são <code>private</code> e <code>protected</code> encoraja p bom estilo de
programação, e evita o uso inadvertido de métodos que não fazem parte da API pública de uma classe. É importante entender, no entanto, que os recursos
de metaprogramação de Ruby tornam trivial para invocar métodos <code>private</code> e <code>protected</code> e até mesmo para acessar variáveis de instância encapsuladas.
Para chamar o método <code>private</code> <code>utility</code> definida no código anterior, você pode usar o método de envio, ou você pode usar <code>instance_eval</code> para avaliar
um bloco no contexto do objeto:</p>

<figure class='code'><figcaption><span>instance_eval</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">w</span> <span class="o">=</span> <span class="no">Widget</span><span class="o">.</span><span class="n">new</span>                      <span class="c1"># Criar um Widget</span>
</span><span class='line'><span class="n">w</span><span class="o">.</span><span class="n">send</span> <span class="ss">:utility_method</span>              <span class="c1"># Invoke método privado!</span>
</span><span class='line'><span class="n">w</span><span class="o">.</span><span class="n">instance_eval</span> <span class="p">{</span> <span class="n">utility_method</span> <span class="p">}</span>  <span class="c1"># Outra forma de invocá-lo</span>
</span><span class='line'><span class="n">w</span><span class="o">.</span><span class="n">instance_eval</span> <span class="p">{</span> <span class="vi">@x</span> <span class="p">}</span>              <span class="c1"># Ler variável de instância de w</span>
</span></code></pre></td></tr></table></div></figure>


<p>Se você quiser chamar um método pelo nome, mas você não quer inadvertidamente invocar um método <code>private</code> que você não sabe aproximadamente, você pode
(no Ruby 1.9) usar <code>public_send</code> em vez de <code>send</code>. Ele funciona como <code>send</code>, mas não invoca métodos <code>private</code> quando chamado com um receptor
específico.</p>

<p>É isso ai amigos&hellip;</p>

<p>Até o proximo.. =D</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Rodrigo Martins</span></span>

      








  


<time datetime="2012-09-09T19:31:00-03:00" pubdate data-updated="true"></time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/hook/'>hook</a>, <a class='category' href='/blog/categories/integer/'>integer</a>, <a class='category' href='/blog/categories/kernel/'>kernel</a>, <a class='category' href='/blog/categories/object/'>object</a>, <a class='category' href='/blog/categories/ruby/'>ruby</a>, <a class='category' href='/blog/categories/ruby-1-dot-9/'>ruby 1.9</a>, <a class='category' href='/blog/categories/ruby-api/'>ruby api</a>, <a class='category' href='/blog/categories/string/'>string</a>, <a class='category' href='/blog/categories/the-ruby-programming-language/'>the ruby programming language</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2012/09/05/reflexao-e-metaprogramacao-hooks-number-ruby-1-dot-9-part-v/" title="Previous Post: Reflexão e Metaprogramação - Hooks - #Ruby 1.9 - Part V">&laquo; Reflexão e Metaprogramação - Hooks - #Ruby 1.9 - Part V</a>
      
      
        <a class="basic-alignment right" href="/blog/2012/09/10/reflexao-e-metaprogramacao-tracing-number-ruby-1-dot-9-part-vi/" title="Next Post: Reflexão e Metaprogramação - Tracing - #Ruby 1.9 - Part VI">Reflexão e Metaprogramação - Tracing - #Ruby 1.9 - Part VI &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    
<section id="twitter">
  <h1 class="tweets">Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating...</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("rr_martins", 5, true);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/rr_martins" class="twitter-follow-button" data-show-count="true">Follow @rr_martins</a>
  
</section>

<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2015/09/21/ser-importante-ou-famoso/">Ser importante ou famoso?</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/12/10/ditado-chines-do-pao/">Ditado Chinês do Pão</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/05/18/brincando-com-chicagoboss/">Brincando com ChicagoBoss</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/02/26/tenho-sede/">Tenho Sede</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/04/28/nao-e-bem-uma-string/">Não é bem uma String</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/rrmartins">@rrmartins</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'rrmartins',
            count: 5,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - <a href="mailto:rodrigo@rrmartins.com">Rodrigo Martins</a><br/>
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a> + <a href="https://github.com/ioveracker/mnml">mnml</a>.
	  
	  Hosted by <a href="http://github.com">GitHub Pages</a>. 
	  
  </span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'rrmartins';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://rrmartins.com/blog/2012/09/09/metodos-de-visibilidade-public/';
        var disqus_url = 'http://rrmartins.com/blog/2012/09/09/metodos-de-visibilidade-public/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'https://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
