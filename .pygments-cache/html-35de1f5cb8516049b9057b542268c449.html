<div class="highlight"><pre><span class="nt">&lt;html&gt;</span> 
<span class="nt">&lt;head&gt;</span> 
<span class="nt">&lt;title&gt;</span>nowjs test<span class="nt">&lt;/title&gt;</span> 
<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src=</span><span class="s">&quot;http://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span> 
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;nowjs/now.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>

<span class="nt">&lt;script&gt;</span>
<span class="kd">function</span> <span class="nx">empty</span><span class="p">(</span><span class="nx">v</span><span class="p">){</span>
	<span class="k">if</span> <span class="p">(</span><span class="nx">v</span><span class="o">==</span><span class="kc">null</span> <span class="o">||</span> <span class="nx">v</span><span class="o">==</span><span class="mi">0</span> <span class="o">||</span> <span class="nx">v</span><span class="o">==</span><span class="s1">&#39;&#39;</span> <span class="o">||</span> <span class="nx">v</span><span class="o">==</span><span class="s2">&quot;&quot;</span><span class="p">){</span>
		<span class="k">return</span> <span class="kc">true</span>
<span class="p">}</span><span class="k">else</span> <span class="p">{</span><span class="k">return</span> <span class="kc">false</span><span class="p">}</span>
<span class="p">}</span>
<span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>

  <span class="nx">now</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">prompt</span><span class="p">(</span><span class="s2">&quot;Qual seu Nome?&quot;</span><span class="p">,</span> <span class="s2">&quot;nome&quot;</span><span class="p">);</span>  
  <span class="nx">now</span><span class="p">.</span><span class="nx">receiveMessage</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">message</span><span class="p">){</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">message</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">){</span>
	<span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;mensagem vazia&quot;</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">empty</span><span class="p">(</span><span class="nx">message</span><span class="p">)){</span>
	<span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;mensagem vazia&quot;</span><span class="p">);</span>
    <span class="p">}</span><span class="k">else</span>  <span class="p">{</span>
    	<span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#messages&quot;</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;&lt;br&gt;&quot;</span> <span class="o">+</span> <span class="nx">name</span> <span class="o">+</span> <span class="s2">&quot;: &quot;</span> <span class="o">+</span> <span class="nx">message</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
  
  <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#send-button&quot;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
    <span class="nx">now</span><span class="p">.</span><span class="nx">distributeMessage</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#text-input&quot;</span><span class="p">).</span><span class="nx">val</span><span class="p">());</span>
    <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#text-input&quot;</span><span class="p">).</span><span class="nx">val</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">);</span>
  <span class="p">});</span>
  
<span class="p">});</span>
<span class="nt">&lt;/script&gt;</span>
<span class="nt">&lt;/head&gt;</span> 
 
<span class="nt">&lt;body&gt;</span> 
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;messages&quot;</span><span class="nt">&gt;&lt;/div&gt;</span>
<span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">id=</span><span class="s">&quot;text-input&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;button&quot;</span> <span class="na">value=</span><span class="s">&quot;Send&quot;</span> <span class="na">id=</span><span class="s">&quot;send-button&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;/body&gt;</span> 
<span class="nt">&lt;/html&gt;</span> 
</pre>
</div>
